@{
    var homeUrl = Url.Action("Index", "Main", null).TrimEnd('/');
}

<script id="tmpl-modalheader" type="text/x-handlebars-template">
    <div class="modal-header">
        {{#if showClose}}
        <button type="button" class="close btn-close"><span aria-hidden="true">&times;</span><span class="sr-only">{{closeText}}</span></button>
        {{/if}}
        <h4 class="modal-title">{{title}}</h4>
    </div>
</script>

<script id="tmpl-modalbody" type="text/x-handlebars-template">
    <div class="modal-body">
        {{{content}}}
    </div>
</script>

<script id="tmpl-modalfooter" type="text/x-handlebars-template">
    <div class="modal-footer">
        {{#if showClose}}
        <button type="button" class="btn btn-default btn-close">{{closeText}}</button>
        {{/if}}
        {{#if showAccept}}
        <button type="submit" class="btn btn-primary btn-action">{{acceptText}}</button>
        {{/if}}
    </div>
</script>

<script id="tmpl-copylink" type="text/x-handlebars-template">
    <span class="copy-link">
        <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="14" height="14">
            <param name="movie" value="@(homeUrl)/Content/Img/clippy.swf" />
            <param name="allowScriptAccess" value="always" />
            <param name="quality" value="high" />
            <param name="scale" value="noscale" />
            <param name="FlashVars" value="text={{text}}">
            <param name="bgcolor" value="#ffffff">
            <param name="wmode" value="opaque">
            <embed src="@(homeUrl)/Content/Img/clippy.swf"
                   width="14"
                   height="14"
                   wmode="opaque"
                   name="clippy"
                   quality="high"
                   scale="noscale"
                   allowscriptaccess="always"
                   type="application/x-shockwave-flash"
                   pluginspage="http://www.macromedia.com/go/getflashplayer"
                   flashvars="text={{text}}"
                   bgcolor="#ffffff" />
        </object>
    </span>
</script>

<script id="tmpl-detail" type="text/x-handlebars-template">
    <table class="table detail">
        <colgroup>
            <col class="detail-label" />
            <col class="detail-copylink" />
            <col class="detail-data" />
        </colgroup>
        <tbody>
            {{#if Url}}
            <tr>
                <th>Url</th>
                <td>&nbsp;</td>
                <td><a class="display-link" href="{{Url}}" onclick="window.open(this.href); return false;"><span class="full">{{Url}}</span><span class="truncated">{{truncate Url 26}}</span></a></td>
            </tr>
            {{/if}}
            {{#if Username}}
            <tr>
                <th>Username</th>
                <td class="copy-link">{{{UsernameCopyLink}}}</td>
                <td>{{Username}}</td>
            </tr>
            {{/if}}
            {{#if Password}}
            <tr>
                <th>Password</th>
                <td class="copy-link">{{{PasswordCopyLink}}}</td>
                <td>{{Password}}</td>
            </tr>
            {{/if}}
            {{#if UserDefined1}}
            <tr>
                <th>{{UserDefined1Label}}</th>
                <td class="copy-link">{{{UserDefined1CopyLink}}}</td>
                <td>{{UserDefined1}}</td>
            </tr>
            {{/if}}
            {{#if UserDefined2}}
            <tr>
                <th>{{UserDefined2Label}}</th>
                <td class="copy-link">{{{UserDefined2CopyLink}}}</td>
                <td>{{UserDefined2}}</td>
            </tr>
            {{/if}}
            {{#if Notes}}
            <tr>
                <th>Notes</th>
                <td>&nbsp;</td>
                <td>{{breaklines Notes}}</td>
            </tr>
            {{/if}}
        </tbody>
    </table>
</script>

<script id="tmpl-credentialform" type="text/x-handlebars-template">
    @{Html.RenderPartial("_CredentialForm", new CredentialViewModel());}
</script>

<script id="tmpl-deleteconfirmationdialog" type="text/x-handlebars-template">
    <p>Are you sure you want to delete this credential?</p>
</script>

<script id="tmpl-optionsdialog" type="text/x-handlebars-template">
    <p>Enter and confirm a new password:</p>
    <div class="form-horizontal">
        <div class="form-group">
            <label for="NewPassword" class="col-sm-4 control-label">New Password</label>
            <div class="col-sm-8">
                <input type="password" id="NewPassword" name="NewPassword" class="form-control" value="" />
            </div>
        </div>
        <div class="form-group">
            <label for="NewPasswordConfirm" class="col-sm-4 control-label">Confirm New Password</label>
            <div class="col-sm-8">
                <input type="password" id="NewPasswordConfirm" name="NewPasswordConfirm" class="form-control" value="" />
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-offset-4 col-sm-8">
                <button class="btn btn-primary" id="change-password-button" onclick="Vault.changePassword('{{userid}}', '{{masterkey}}');">Change Password</button>
            </div>
        </div>
        <hr />
        <div class="form-group">
            <label for="import-data" class="col-sm-4 control-label">Import Data</label>
            <div class="col-sm-8">
                <textarea class="form-control" id="import-data" placeholder="Paste exported JSON data here"></textarea>
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-offset-4 col-sm-8">
                <button class="btn btn-primary" id="import-button" onclick="Vault.importData('{{userid}}', '{{masterkey}}', $('#import-data').val());">Import Data</button>
            </div>
        </div>
        <hr />
        <div class="form-group">
            <label for="export-button" class="col-sm-4 control-label">Export Data</label>
            <div class="col-sm-8">
                <button class="btn btn-primary" id="export-button" onclick="Vault.exportData('{{userid}}', '{{masterkey}}');">Export Data</button>
            </div>
        </div>
    </div>
</script>

<script id="tmpl-exporteddatawindow" type="text/x-handlebars-template">
    <html>
    <head>
        <title>Exported Data</title>
    </head>
    <body style="margin: 0; padding: 0;">
        <textarea style="border: none; width: 100%; height: 600px;">{{json}}</textarea>
    </body>
</html>
</script>

<script id="tmpl-validationmessage" type="text/x-handlebars-template">
    <div id="validation-message"><p>{{{errors}}}</p></div>
</script>

<script id="tmpl-credentialtable" type="text/x-handlebars-template">
    <table id="records" class="table table-condensed">
        <tbody>
            {{#each rows}}
            {{> credentialtablerow}}
            {{/each}}
        </tbody>
    </table>
</script>

<script id="tmpl-credentialtablerow" type="text/x-handlebars-template">
    <tr id="{{credentialid}}">
        <td>
            <button class="btn btn-default btn-block btn-l btn-credential-show-detail">
                <span class="full">{{description}}</span><span class="truncated">{{truncate description 31}}</span>
                <br />
                <span class="label label-std">{{username}}</span>
                @*<span class="label label-std">{{password}}</span>*@
                {{#if weak}}
                <span class="label label-warning">Weak Password</span>
                {{/if}}
            </button>
        </td>
        <td class="center">
            <button class="btn btn-primary btn-block btn-credential-edit">
                <span class="glyphicon glyphicon-pencil"></span>
            </button>
        </td>
        <td class="center">
            <button class="btn btn-danger btn-block btn-credential-delete">
                <span class="glyphicon glyphicon-trash"></span>
            </button>
        </td>
    </tr>
</script>