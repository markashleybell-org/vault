@model dynamic

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/Main.cshtml";
}

@section head {

    <script type="text/javascript" src="/content/js/main.js"></script>

}

@section main {

    @{Html.RenderPartial("Credential", new CredentialViewModel());}

    @{Html.RenderPartial("Login", new LoginViewModel());}

    <script type="text/javascript">
        $('#login-form-dialog').dialog({ title: 'Log In', width: 500, modal: true });
    </script>

    <script id="tmpl-copylink" type="text/x-handlebars-template">
        <span class="copy-link">
            <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="14" height="14">
               <param name="movie" value="/content/img/clippy.swf" />
               <param name="allowScriptAccess" value="always" />
               <param name="quality" value="high" />
               <param name="scale" value="noscale" />
               <param name="FlashVars" value="text={{text}}">
               <param name="bgcolor" value="#ffffff">
               <param name="wmode" value="opaque">
               <embed src="/content/img/clippy.swf"
                      width="14"
                      height="14"
                      wmode="opaque"
                      name="clippy"
                      quality="high"
                      scale="noscale"
                      allowscriptaccess="always"
                      type="application/x-shockwave-flash"
                      pluginspage="http://www.macromedia.com/go/getflashplayer"
                      flashvars="text={{text}}"
                      bgcolor="#ffffff" />
            </object>
        </span>
    </script>
    
    <script id="tmpl-detail" type="text/x-handlebars-template">
        <table>
            <tbody>
                {{#if Url}}
                <tr>
                    <th>Url</th>
                    <td><a class="display-link" href="{{Url}}" onclick="window.open(this.href); return false;">{{Url}}</a></td>
                </tr>
                {{/if}}
                {{#if Username}}
                <tr>
                    <th>Username {{{UsernameCopyLink}}}</th>
                    <td>{{Username}}</td>
                </tr>
                {{/if}}
                {{#if Password}}
                <tr>
                    <th>Password {{{PasswordCopyLink}}}</th>
                    <td>{{Password}}</td>
                </tr>
                {{/if}}
                {{#if UserDefined1}}
                <tr>
                    <th>{{UserDefined1Label}} {{{UserDefined1CopyLink}}}</th>
                    <td>{{UserDefined1}}</td>
                </tr>
                {{/if}}
                {{#if UserDefined2}}
                <tr>
                    <th>{{UserDefined2Label}} {{{UserDefined2CopyLink}}}</th>
                    <td>{{UserDefined2}}</td>
                </tr>
                {{/if}}
                {{#if Notes}}
                <tr>
                    <th>Notes</th>
                    <td>{{Notes}}</td>
                </tr>
                {{/if}}
            </tbody>
        </table>
    </script>

    <script id="tmpl-addlink" type="text/x-handlebars-template">
        <p id="add-link"><button onclick="Vault.loadCredential(null, '{{masterkey}}', '{{userid}}'); return false;">Add Item</button> <button onclick="Vault.options(); return false;">Options</button></p>
    </script>

    <script id="tmpl-clearfilter" type="text/x-handlebars-template">
        <input type="button" style="float: right;" onclick="$('#records_filter input:last').val('');$('#records_filter input:last').trigger('keyup');" value="X" />
    </script>

    <script id="tmpl-deleteconfirmationdialog" type="text/x-handlebars-template">
        <p>Are you sure you want to delete this credential?</p>
        <form>
            <p>
                <button onclick="$('#modal-dialog').dialog('destroy'); return false;">No</button> 
                <button onclick="Vault.deleteCredential('{{id}}', '{{userid}}', '{{masterkey}}'); return false;">Yes</button>
            </p>
        </form>
    </script>

}

@section endpage {

    <script type="text/javascript" src="/content/js/passpack-v1.1.min.js"></script>
    <script type="text/javascript" src="/content/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="/content/js/handlebars-v1.3.0.js"></script>

}
